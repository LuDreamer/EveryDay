<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>类型转换</title>
</head>
<body>
    <script src="Object.is的手写.js"></script>
    <script>
        console.log(String(null));
        console.log(String(true));
        console.log(String({}));//vlueOf()返回对象本身->toString()返回[object Object]
        console.log(String([1,2,3]));

        // Number()基本类型
console.log(Number(undefined)); // NaN
console.log(Number(null));      // 0
console.log(Number(true));      // 1
console.log(Number(false));     // 0
console.log(Number("123"));     // 123
console.log(Number(""));        // 0
console.log(Number("12a"));     // NaN

// 对象类型
console.log(Number({}));        // NaN
console.log(Number([]));        // 0
console.log(Number([123]));     // 123
console.log(Number([1, 2]));    // NaN
console.log(Number(new Date()));// 时间戳数字

//数组转换number 
// 1. 空数组
console.log(Number([])); // 0
// 解析：[] → toString() → "" → Number("") → 0

// 2. 单元素数组（元素为数字）
console.log(Number([123])); // 123
console.log(Number([0])); // 0
// 解析：[123] → toString() → "123" → Number("123") → 123

// 3. 单元素数组（元素为字符串）
console.log(Number(["456"])); // 456（字符串"456"转数字）
console.log(Number(["78a"])); // NaN（非纯数字字符串）

// 4. 多元素数组
console.log(Number([1, 2])); // NaN
console.log(Number([true, false])); // NaN
// 解析：[1,2] → toString() → "1,2" → 非纯数字字符串 → NaN

// 5. 嵌套数组
console.log(Number([[1]])); // NaN
// 解析：[[1]] → toString() → "1"（注意：嵌套数组toString会扁平化）→ 1？
// 实际测试：[[1]].toString() → "1"，因此Number([[1]]) → 1（特殊情况）

// // 数据转换优先级：x.toString(),优先级最低
// x.valueOf(),优先级第二
// x.[Symbol.toPrimitive],优先级最高
let a = {
  valueOf() {
    return 1
  },
  toString() {
    return '1'
  },
  [Symbol.toPrimitive]() {
    return 2
  }
}
console.log("值为"+(2+a));
console.log(is(Number([1,3]),NaN));//true
console.log(is((1/+0),(1/-0)));
console.log(is((1/0),(1/0)));
console.log(Number[1,3]); // undefined

</script>
</body>
</html>