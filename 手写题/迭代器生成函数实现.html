<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //iterator本质--是一种更规范，用于遍历数据结构，核心：next()  Symbol.iterator接口
        //简化版：接受一个数组，返回一个迭代器对象，通过next方法遍历数组
        function iteratorGenerator(list){
            //记录索引
            let index=0
            //返回迭代器对象
            return{
                next:()=>{
                    //每次调用返回当前元素和遍历状态
                    if(index<list.length){
                        return{
                            value:list[index++],
                            done:false
                        }
                    }else{
                        return{
                            value:undefined,
                            done:true
                        }
                    }
                }
            }
        }
        const simpleIterator = iteratorGenerator(['a', 'b', 'c']);
            console.log(simpleIterator.next()); // { value: 'a', done: false }（第一次取）
            console.log(simpleIterator.next()); // { value: 'b', done: false }（第二次取）
            console.log(simpleIterator.next()); // { value: 'c', done: false }（第三次取）
            console.log(simpleIterator.next()); // { value: undefined, done: true }（遍历完）

            //进阶版：给自定义对象实现迭代器接口，支持for…of遍历
            let obj = {
                    data: ['hello', 'world'], // 要遍历的数据
                    [Symbol.iterator]() { // 迭代器生成函数（关键：属性名是Symbol.iterator）
                        let index=0
                        return{next:()=>{
                            if(index<this.data.length){
                               return{
                                value:this.data[index++],
                                done:false
                               }
                            }else{
                                return{
                                    value:undefined,
                                    done:true
                                }
                            }
                        }
                    }
                }}
                let iterator=obj[Symbol.iterator]()
                console.log(iterator.next())
                console.log(iterator.next())
                console.log(iterator.next())
                for(val of obj){
                    console.log(val
                        //for of会自动调用[Symbol.ierator]()
                    );
                    
                }
        </script>
</body>
</html>